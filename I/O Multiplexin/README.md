# 什么是IO多路复用
多路指的是多个文件句柄，复用指的是使用同一个线程。其含义是**多个句柄使用同一线程维护**。在服务端中，常常需要和多个客户端保持通信，当某一个句柄收到客户端数据，或者某一句柄可以发送数据时，服务端如何发现？如果不使用IO复用，可以有两种方式。
## 不使用IO多路复用
### 同步阻塞（BIO）
服务端的一个线程阻塞在`recv/send`调用上，那么一个线程仅仅只能维护一个连接，效率很低。阻塞指的是线程在执行同步指的是由线程主动去检查句柄是否可用，
### 同步非阻塞（NIO）
服务端的一个线程轮询所有句柄，对每个句柄执行非阻塞的`recv/send`。虽然一个线程能够维护多个连接了，但是很可能大部分的轮询都是无用的，因为可能所有句柄的状态都没有改变，再加上每一次`recv/send`都是一次系统调用，白白浪费了CPU。
## 使用IO多路复用（更好的NIO）
当线程调用select/poll/epoll时，线程阻塞，句柄由内核代为监听。当某一句柄发生事件时，内核唤醒线程。通过IO多路复用，线程不必频繁执行系统调用，也不必占用大量CPU。每次线程被唤醒时，必定有句柄的状态发生改变。

IO多路复用是一种**同步IO***，所谓同步IO即系统不会主动将数据拷贝到用户态，用户态需要主动去确认句柄是否发生改变，从而拷贝数据并执行相应操作。


# IO多路复用


